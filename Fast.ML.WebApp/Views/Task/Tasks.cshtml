@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor _httpContextAccessor

@{
    ViewData["Title"] = "Tasks";
}

<div class="container montserrat-font">
    <h2 class="text-center font-weight-bold">Tasks</h2>
    @if (ViewBag.Tasks.Count > 0)
    {
        <div class="panel panel-default">
            <div class="panel-body" style="border-radius: 5px; border: 1px solid rgba(0,0,0,.125);">
                <ul class="list-group" style="overflow-y:scroll;max-height: 75vh">
                    @for (var i = 0; i < ViewBag.Tasks.Count; ++i)
                    {
                        var task = ViewBag.Tasks[i];
                        var taskDate = task.Remove(0, 11);
                        if (i == 0)
                        {
                            <li class="list-group-item" style="border-top:0;border-left:0;border-right:0">
                                <label style="float: left; margin-top: 0.5rem; margin-bottom: 0">
                                    @taskDate
                                </label>
                                <div style="float: right">
                                    <a class="btn btn-primary" asp-controller="Task" 
                                       asp-action="Log" asp-route-task_id="@task">Log</a>
                                    <a class="btn btn-primary" asp-controller="Model" 
                                       asp-action="SelectModels" asp-route-task_id="@task">Models</a>
                                </div>
                            </li>
                        }
                        else if (i == ViewBag.Tasks.Count - 1)
                        {
                            <li class="list-group-item" style="border-bottom:0;border-left:0;border-right:0">
                                <label style="float: left; margin-top: 0.5rem; margin-bottom: 0">
                                    @taskDate
                                </label>
                                <div style="float: right">
                                    <a class="btn btn-primary" asp-controller="Task" 
                                       asp-action="Log" asp-route-task_id="@task">Log</a>
                                    <a class="btn btn-primary" asp-controller="Model" 
                                       asp-action="SelectModels" asp-route-task_id="@task">Models</a>
                                </div>
                            </li>
                        }
                        else
                        {
                            <li class="list-group-item" style="border-left:0;border-right:0">
                                <label style="float: left; margin-top: 0.5rem; margin-bottom: 0">
                                    @taskDate
                                </label>
                                <div style="float: right">
                                    <a class="btn btn-primary" asp-controller="Task" 
                                       asp-action="Log" asp-route-task_id="@task">Log</a>
                                    <a class="btn btn-primary" asp-controller="Model" 
                                       asp-action="SelectModels" asp-route-task_id="@task">Models</a>
                                </div>
                            </li>
                        }
                    }
                </ul>
            </div>
        </div>
    }
</div>
